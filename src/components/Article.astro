---
const { frontmatter } = Astro.props;
---

<article id="article">
    <img src={frontmatter.image.url} alt={frontmatter.image.alt} />
    <h1>{frontmatter.title}</h1>
    <p>{frontmatter.description}</p>
    <div class="article__content">
        <slot />
    </div>
    <footer>
        <p>Published on {new Date(frontmatter.pubDate).toLocaleDateString()}</p>
        <p>
            Tags: {
                frontmatter.tags.map((tag: string) => (
                    <span class="tag">{tag}</span>
                ))
            }
        </p>

        {frontmatter.klaviyoForm && <div class="klaviyo-form-XBj8PN" />}
    </footer>
</article>

<script is:inline>
    document.addEventListener("DOMContentLoaded", () => {
        const script = document.createElement("script");
        script.src = `https://static.klaviyo.com/onsite/js/klaviyo.js?company_id=VbgWEk`;
        script.type = "text/javascript";
        script.async = true;
        document?.getElementById("article")?.appendChild(script);
    });
</script>
